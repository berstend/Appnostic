(function(){var t,e,r,n,i,a;e=require("fs"),i=require("path"),r=require("js2xmlparser"),a=require(i.join(__dirname,"..","package.json")),n=require("./manifests"),require("coffee-script/register"),t=function(){function t(){}var a,o;return o=2,a={},t.prototype.buildAllManifests=function(t,e){var r,i,a,o;for(o=[],i=0,a=n.length;a>i;i++)r=n[i],o.push(this.buildCompiledManifest(r.name,t,e));return o},t.prototype.buildCompiledManifest=function(t,e,r){return this.baseData=e,this.saveManifest(n[t],r)},t.prototype.saveManifest=function(t,r){var n,a;return a=i.join("dist",t.name,t.name+".manifest."+t.output),n=this.transformData(this.generateData(t),t),e.writeFile(a,n,function(e){if(e)throw e;return r?r(t):void 0})},t.prototype.generateData=function(t){return"json"===t.output?JSON.stringify(t.fields,function(t){return function(e,r){return t.baseData[e]?t.baseData[e]:r}}(this),2):"xml"===t.output?r("Package",t.fields):void 0},t.prototype.transformData=function(t,e){var r,n,i;if(e.transform){i=e.transform;for(r in i)n=i[r],t=t.replace(r,n)}return t},t}(),module.exports=t}).call(this);